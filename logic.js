const Goku = {
    "Normal": [
        "Kamehameha",
        "Kaioken Kamehameha",
        "Kaioken Assault",
        "Spirit Bomb",
        "Super Spirit Bomb"
    ],
    "Super Saiyan": [
        "Kamehameha",
        "Super Kamehameha",
        "Warp Kamehameha"
    ],
    "Super Saiyan 2": [
        "Kamehameha",
        "Super Kamehameha"
    ],
    "Super Saiyan God":[
        "Kamehameha",
        "Super Kamehameha",
        "God Kamehameha"
    ],
    "Super Saiyan Blue":[
        "Kamehameha",
        "Super Kamehameha",
        "10X Kaioken God Kamehameha"
    ],
}
const Vegeta = {
    "Normal": [
        "Galick Gun",
        "Full Power Energy Wave"
    ],
    "Super Saiyan": [
        "Galick Gun",
        "Big Bang Attack",
        "Final Flash"
    ],
    "Super Saiyan 2": [
        "Galick Gun",
        "Full Power Energy Wave",
        "Final Flash"
    ],
    "Super Saiyan God":[
        "Galick Gun",
        "Full Power Energy Wave",
        "Big Bang Attack",
        "Blazing Attack"
    ],
    "Super Saiyan Blue":[
        "Galick Gun",
        "Super Galick Gun",
        "Big Bang Attack",
        "Final Flash"
    ],
}
const ADGohan = {
    "Normal": [
        "Kamehameha",
        "Masenko",
        "Full Power Energy Wave"
    ],
    "Super Saiyan": [
        "Kamehameha",
        "Super Kamehameha",
        "Masenko"
    ],
    "Great Saiyaman 1":[
        "Kamehameha",
        "Masenko",
        "Full Power Energy Wave"
    ],
    "Beast":[
        "Kamehameha",
        "Masenko",
        "Demon Ray",
        "Special Beam Cannon (Beast)"
    ]
}
const TeenGohan ={
    "Normal": [
        "Kamehameha",
        "Masenko",
        "Full Power Energy Wave"
    ],
    "Super Saiyan": [
        "Kamehameha",
        "Masenko",
        "Full Power Energy Wave"
    ],
    "Super Saiyan 2": [
        "Kamehameha",
        "Father Son Kamehameha",
        "Full Power Energy Wave",
        "Motionless Kamehameha"
    ],
}
const Goten = {
    "Normal": [
        "Kamehameha",
        "Charge",
        "Full Power Energy Blast Volley"
    ],
    "Super Saiyan": [
        "Kamehameha",
        "Super Kamehameha",
        "Charge",
        "Full Power Energy Blast Volley"
    ],
}
const Gogeta = {
    "Normal": [
        "Kamehameha",
        "Spirit Blaster"
    ],
    "Super Saiyan Blue": [
        "Super Kamehameha",
        "Soul Punisher",
        "God Punisher"
    ],
}
const Bardock = {
    "Normal": [
        "Full Power Energy Wave",
        "Rebellion Spear"
    ],
    "Super Saiyan": [
        "Riot Javelin",
        "Full Power Energy Wave",
        "Rebellion Spear"
    ],
}
const SBroly = {
    "Rage": [
        "Powered Shell",
        "Gigantic Charge"
    ],
    "Super Saiyan": [
        "Powered Shell",
        "Gigantic Charge",
        "Gigantic Meteor"
    ],
}
const KidTrunks ={
    "Normal": [
        "Full Power Energy Wave",
        "Full Power Energy Blast Volley",
        "Double Buster"
    ],
    "Super Saiyan": [
        "Full Power Energy Wave",
        "Full Power Energy Blast Volley",
        "Double Buster",
        "Finish Buster"
    ],
}
const ADTrunks ={
    "Normal": [
        "Full Power Energy Wave",
        "Full Power Energy Blast Volley",
        "Burning Attack"
    ],
    "Super Saiyan": [
        "Full Power Energy Blast Volley",
        "Burning Slash"
    ],
}
const Beerus = {
    "Normal": [
        "Full Power Energy Wave",
        "Sphere of Destruction"
    ]
}
const Whis = {
    "Normal": [
        "Prelude to Destruction",
        "Symphonic Destruction"
    ]
}
const Piccolo = {
    "Normal": [
        "Evil Explosion",
        "Special Beam Cannon",
        "Hellzone Grenade",
        "Light Grenade"
    ],
    "Orange": [
        "Full Power Energy Wave",
        "Special Beam Cannon",
        "Apocalyptic Burst",
        "Fierce Fist"
    ]
}
const Frieza = {
    "4th Form": [
        "Death Slicer",
        "Death Ball"
    ],
    "Golden":[
        "Crazy Finger Shot",
        "Emperor's Death Beam",
        "Death Slicer"
    ]
}
const Cell = {
    "Perfect Form":[
        "Full Power Energy Blast Volley",
        "Special Beam Cannon",
        "Kamehameha",
        "Perfect Kamehameha"
    ]
}
const Buu = {
    "Innocent":[
        "Full Power Energy Wave",
        "Innocence Cannon"
    ],
    "Kid":[
        "Full Power Energy Wave",
        "Majin Kamehameha",
        "Vanishing Ball"
    ]

}
const GTPan = {
    "Normal": [
        "Maiden Blast",
        "Full Power Energy Wave",
        "Kamehameha",
    ],
}
const An16 = {
    "Normal": [
        "Rocket Punch",
        "Hell Flash",
    ],
}
const An17 = {
    "Normal": [
        "Side Bridge",
        "Full Power Energy Blast Volley",
        "Super Electric Strike",
    ],
}
const An18 = {
    "Normal": [
        "Destructo-Disc",
        "Full Power Energy Blast Volley",
        "Dual Destructo-Disc",
    ],
}
const Ginyu = {
    "Normal": [
        "Full Power Energy Blast Volley",
        "Full Power Energy Wave",
        "Milky Cannon",
    ],
}
const Videl ={
    "Normal": [
        "Full Power Energy Blast Volley",
        "Full Power Energy Wave",
        "Justice Rush",
    ],
    "Great Saiyaman 2": [
        "Full Power Energy Blast Volley",
        "Full Power Energy Wave",
        "Justice Combination",
    ],
}
const Krillin ={
    "Normal": [
        "Full Power Energy Blast Volley",
        "Kamehameha",
        "Destructio-Disc",
        "Chain Destructo-Disc Barrage"
    ]
}
const Tien ={
    "Normal": [
        "Full Power Energy Wave",
        "Tri Beam",
        "Dodon Ray"
    ]
}
const Yamcha ={
    "Normal": [
        "Full Power Energy Blast Volley",
        "Kamehameha",
        "Full Power Energy Wave",
        "Wolf Fang Fist"
    ]
}
function get_random_moves(character, form) {
    // Randomly select a characters super attack and return character form and super
    const TFMap = {
        "Goku": Goku,
        "Vegeta": Vegeta,
        "Adult Gohan": ADGohan,
        "Teen Gohan": TeenGohan,
        "Goten": Goten,
        "Gogeta": Gogeta,
        "Bardock": Bardock,
        "SBroly": SBroly,
        "Kid Trunks": KidTrunks,
        "Adult Trunks":ADTrunks,
        "Beerus": Beerus,
        "Whis": Whis,
        "Piccolo": Piccolo,
        "Frieza": Frieza,
        "Cell": Cell,
        "Buu": Buu,
        "GTPan": GTPan,
        "Android 16": An16,
        "Android 17": An17,
        "Android 18": An18,
        "Ginyu": Ginyu,
        "Videl": Videl,
        "Krillin": Krillin,
        "Tien": Tien,
        "Yamcha": Yamcha,
    }
    const transformations = TFMap[character]
    const moves = transformations[form];
    const move = moves[Math.floor(Math.random() * moves.length)];
    return { name: character, form, move };
}
//array of paths
const imagePaths = [
    "Resize/Goku_Normal_500x500.png",
    "Resize/Goku_Super Saiyan_500x500.png",
    "Resize/Goku_Super Saiyan 2_500x500.png",
    "Resize/Goku_Super Saiyan God_500x500.png",
    "Resize/Goku_Super Saiyan Blue_500x500.png",
    "Resize/Vegeta_Normal_500x500.png",
    "Resize/Vegeta_Super Saiyan_500x500.png",
    "Resize/Vegeta_Super Saiyan 2_500x500.png",
    "Resize/Vegeta_Super Saiyan God_500x500.png",
    "Resize/Vegeta_Super Saiyan Blue_500x500.png",
    "Resize/Adult Gohan_Normal_500x500.png",
    "Resize/Adult Gohan_Super Saiyan_500x500.png",
    "Resize/Adult Gohan_Great Saiyaman 1_500x500.png",
    "Resize/Adult Gohan_Beast_500x500.png",
    "Resize/Teen Gohan_Normal_500x500.png",
    "Resize/Teen Gohan_Super Saiyan_500x500.png",
    "Resize/Teen Gohan_Super Saiyan 2_500x500.png",
    "Resize/Goten_Normal_500x500.png",
    "Resize/Goten_Super Saiyan_500x500.png",
    "Resize/Gogeta_Normal_500x500.png",
    "Resize/Gogeta_Super Saiyan Blue_500x500.png",
    "Resize/Bardock_Normal_500x500.png",
    "Resize/Bardock_Super Saiyan_500x500.png",
    "Resize/SBroly_Rage_500x500.png",
    "Resize/SBroly_Super Saiyan_500x500.png",
    "Resize/Kid Trunks_Normal_500x500.png",
    "Resize/Kid Trunks_Super Saiyan_500x500.png",
    "Resize/Adult Trunks_Normal_500x500.png",
    "Resize/Adult Trunks_Super Saiyan_500x500.png",
    "Resize/Beerus_Normal_500x500.png",
    "Resize/Whis_Normal_500x500.png",
    "Resize/Piccolo_Normal_500x500.png",
    "Resize/Piccolo_Orange_500x500.png",
    "Resize/Frieza_4th Form_500x500.png",
    "Resize/Frieza_Golden_500x500.png",
    "Resize/Cell_Perfect Form_500x500.png",
    "Resize/Buu_Innocent_500x500.png",
    "Resize/Buu_Kid_500x500.png",
    "Resize/GTPan_Normal_500x500.png",
    "Resize/Android 16_Normal_500x500.png",
    "Resize/Android 17_Normal_500x500.png",
    "Resize/Android 18_Normal_500x500.png",
    "Resize/Ginyu_Normal_500x500.png",
    "Resize/Videl_Normal_500x500.png",
    "Resize/Videl_Great Saiyaman 2_500x500.png",
    "Resize/Krillin_Normal_500x500.png",
    "Resize/Tien_Normal_500x500.png",
    "Resize/Yamcha_Normal_500x500.png"
];
let isRolling = false;
function Roll(){
    if(isRolling){
        console.log("ROLLING ALREADY")
        alert("ROLLING ALREADY")
        return;
    }
    console.log('Rolling')
    isRolling = true;
    const boxes = document.querySelectorAll('.boxes')
    rollInterval = setInterval(() => { //Start the rolling mtfs
        boxes.forEach(box => {
          const randomImageIndex = Math.floor(Math.random() * imagePaths.length);
          box.style.backgroundImage = "url('" + imagePaths[randomImageIndex] + "')";
        });
    }, 100);
}
const noChargeSupersMoves = ["Gigantic Charge","Rebellion Spear","Charge","Fierce Fist"];
const meleeSupersMoves = ["Kaioken Assault", "Burning Slash", "Symphonic Destruction", "Apocalyptic Burst","Justice Rush","Justice Combination","Wolf Fang Fist"];
function Stop() {
    if(!isRolling){
        console.log("ROLLING HAS STOPPED ALREADY")
        alert("ROLLING HAS STOPPED ALREADY")
        return;
    }
    isRolling = false;
    console.log('stop rolling')
    clearInterval(rollInterval);
    const selectedMoves = getFilteredValues('move'); // Filtered moves
    const selectedForms = getFilteredValues('form'); // Filtered forms
    const noChargeSupersFilter = document.getElementById('noChargeSupers').checked;//Check if box is selected
    const noMeleeSupersFilter = document.getElementById('noMeleeSupers').checked;
    const boxes = document.querySelectorAll('.boxes')
    boxes.forEach((box, index) => {
        let validSelection = false;

        while (!validSelection) {
            const randomImageIndex = Math.floor(Math.random() * imagePaths.length);
            box.style.backgroundImage = "url('" + imagePaths[randomImageIndex] + "')";
            const ImgUrl = box.style.backgroundImage;
            const imageName = ImgUrl.slice(ImgUrl.lastIndexOf('/') + 1, ImgUrl.lastIndexOf('.'));
            const [character, form] = imageName.split('_');
            const data = get_random_moves(character, form);
            //checks if the values dont interfere with the filters
            if (noChargeSupersFilter && noChargeSupersMoves.includes(data.move)) {
                continue; // Skip this move and re-select
            }
            if (noMeleeSupersFilter && meleeSupersMoves.includes(data.move)) {
                continue; // Skip this move and re-select
            }
            if (!selectedMoves.includes(data.move) && !selectedForms.includes(form)) {
                validSelection = true;
                const resultElement = document.getElementById(`result${index + 1}`);
                resultElement.textContent = `Level ${index + 1}: ${character}, ${form}, ${data.move}`;
            }
        }
    });
}
function getFilteredValues(type) {
    const checkboxes = document.querySelectorAll(`input[name="${type}"]:checked`);
    let values = [];
    checkboxes.forEach((checkbox) => {
        values.push(checkbox.value);
    });
    return values;
}
document.getElementById("spin").addEventListener('click', Roll);
document.getElementById('stop').addEventListener('click', Stop);
document.getElementById('darkMode').addEventListener('change', function() {
    document.body.classList.toggle('dark-mode');
    document.getElementById('app').classList.toggle('dark-mode');
});
document.addEventListener('DOMContentLoaded', function() {
    let filterContainer = document.querySelector('#filters'); // Select the container
    let head = filterContainer.querySelector('.FilterHeader');
    let arrow = filterContainer.querySelector('.arrow');
    let filterGroups = filterContainer.querySelectorAll('.filter-group'); // Select all filter groups
  
    head.addEventListener('click', function() { // Add click event to head
      filterGroups.forEach(function(description) { // Iterate over each filter group
        if (description.style.display === "none" || !description.style.display) {
          description.style.display = "block";
          arrow.innerHTML = '&#x25BC;';
        } else {
          description.style.display = "none";
          arrow.innerHTML = '&#x25BA;';
        }
      });
    })
  })
  document.addEventListener('DOMContentLoaded', function() {
    // Function to check if all forms are selected
    function checkAllFormsSelected() {
        const formCheckboxes = document.querySelectorAll('input[name="form"]');
        const selectedForms = Array.from(formCheckboxes).filter(cb => cb.checked);

        if (formCheckboxes.length === selectedForms.length) {
            formCheckboxes[formCheckboxes.length - 1].checked = false;
            alert("All forms would be selected.");
        }
    }

    // Add event listeners to form checkboxes
    const formCheckboxes = document.querySelectorAll('input[name="form"]');
    formCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', checkAllFormsSelected);
    });
});